<div class="container mx-auto p-4">
	<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
		<!-- Left Sidebar -->
		<div class="col-span-1 md:col-span-1 rounded-lg p-4">
			<div class="text-center">
				<img
					[src]="profilePictureUrl$ | async"
					alt="User Profile Picture"
					class="w-32 h-32 sm:w-48 sm:h-48 md:w-64 md:h-64 rounded-full mx-auto mb-4 object-cover" />
				<h1 class="text-xl font-semibold mb-3">
					{{ (user$ | async)?.username }}
				</h1>
				<p class="text-gray-400 mb-2">
					{{ (user$ | async)?.description }}
				</p>
				<ng-container *ngIf="isFollowing$ | async as isFollowing">
					<!--<button class="mt-4 px-4 py-2 bg-primary text-white rounded-lg" *ngIf="isFollowing; else notFollowing" (click)="unfollowUser((user$ | async)?.id)">
            Ne plus suivre
          </button>-->
					<ng-template #notFollowing>
						<!--<button
              class="mt-4 px-4 py-2 bg-primary text-white rounded-lg"
              *ngIf="(user$ | async)?.id !== undefined"
              (click)="followUser((user$ | async)?.id!)">
              Suivre
            </button>-->
					</ng-template>
				</ng-container>
				<div
					class="grid grid-cols-1 sm:grid-cols-3 justify-items-center mt-8 w-full">
					<div class="text-center order-2 sm:order-1">
						<span class="text-xl font-semibold">{{
							(user$ | async)?.posts?.length || 0
						}}</span>
						<p class="text-gray-400">posts</p>
					</div>
					<div class="text-center order-1 sm:order-2">
						<span class="text-xl font-semibold">{{
							(user$ | async)?.followers?.length || 0
						}}</span>
						<p class="text-gray-400">abonnés</p>
					</div>
					<div class="text-center order-3 sm:order-3">
						<span class="text-xl font-semibold">{{
							(user$ | async)?.following?.length || 0
						}}</span>
						<p class="text-gray-400">abonnements</p>
					</div>
				</div>
			</div>
			<!-- Public Groups -->
			<div class="mt-10 flex flex-col items-center">
				<h2 class="text-2xl font-semibold mb-4">Groups</h2>
				<ng-container
					*ngIf="
						(user$ | async)?.isPrivate && (isFollowing$ | async) === false;
						else showGroups
					">
					<div class="text-gray-400">Profil privé</div>
				</ng-container>
				<ng-template #showGroups>
					<app-profile-groups
						[userGroups]="userGroups$ | async"></app-profile-groups>
				</ng-template>
			</div>
		</div>
		<!-- Main Content -->
		<div class="col-span-1 md:col-span-2 rounded-lg p-4">
			<!-- Pinned Post -->
			<ng-container *ngIf="pinnedPost$ | async as pinnedPost">
				<app-pinned-post
					[post]="pinnedPost"
					[isOwnProfile]="false"></app-pinned-post>
			</ng-container>
			<!-- Post List -->
			<ng-container
				*ngIf="
					(user$ | async)?.isPrivate && (isFollowing$ | async) === false;
					else showPosts
				">
				<div class="text-gray-400">Profil privé</div>
			</ng-container>
			<ng-template #showPosts>
				<app-post-list
					[posts]="userPosts$ | async"
					[isOwnProfile]="false"></app-post-list>
			</ng-template>
		</div>
	</div>
</div>
